<?php	require_once('../includes/connection.php');	$mensaje = "";	$error = 1;	function redirectToLogIn($mensaje, $error) {		$inicio = "../inicio.php";		$login = "../login.php";		if ($error == 2) {			header('Location: ' . $login . "?errorLog=" . $mensaje );			exit;		} elseif ($error == 0) {			header('Location: ' . $inicio);			exit;		}	}	if (isset($_POST['enviardatos'])) {		$usuario = $_POST['usuario'];		$contras = sha1($_POST['contrasena']);		if (empty($usuario) || $_POST['contrasena'] = '') {			$mensaje = 'por favor llena los campos';			$error = 1;			redirectToLogIn($mensaje, 2);		} else {			$q_usuario = "SELECT id, username ";			$q_usuario.= "FROM usuarios ";			$q_usuario.= "WHERE username = '{$usuario}' ";			$q_usuario.= "AND hashed_password = '{$contras}'";			$r_usuario = mysqli_query($connection, $q_usuario);			if (mysqli_num_rows($r_usuario) == 1) {				$quien = mysqli_fetch_array($r_usuario);				session_start();				$_SESSION['user_id']  = $quien['id'];				$_SESSION['username'] = $quien['username'];				$mensaje = "ususario identificado";				redirectToLogIn($mensaje, 0);			} else {				$mensaje = 'el usuario o contraseña están errados';				redirectToLogIn($mensaje, 2);			}		}	} else {		$mensaje = "no se enviaron datos";		redirectToLogIn($mensaje, 2);	}?>